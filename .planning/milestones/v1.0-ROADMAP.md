# Milestone v1.0 — Event-Driven Backtesting Engine

**Shipped:** 2026-02-22
**Commits:** 28 (527dfe6..96d653d)
**Files:** 56 | **LOC:** 11,076
**Tests:** 250 | **Coverage:** 91%
**Requirements:** 54/54 fulfilled

---

## Key Accomplishments

1. **Event-Driven Architecture** — Immutable frozen dataclasses (MarketEvent, SignalEvent, OrderEvent, FillEvent) + FIFO EventQueue with strict type enforcement
2. **DataHandler** — Yield-generator pattern, Decimal conversion at ingestion boundary, Parquet caching, yfinance/Alpha Vantage API, gap forward-fill, multi-symbol alignment
3. **3 Trading Strategies** — Reversal (RSI/SMA mean reversion), Breakout (Donchian channel + ATR + volume), FVG (ICT 3-candle Fair Value Gap) — all via pandas-ta
4. **Realistic Execution** — Market/Limit/Stop orders, percentage slippage, commission (flat + per-share), bid/ask spread, gap-through fill at open
5. **Portfolio Management** — Decimal cash/positions, FIFO PnL attribution, percentage position sizing, mark-to-market equity log, margin monitoring + forced liquidation
6. **Dash Dashboard** — Candlestick chart with buy/sell markers, equity curve, drawdown waterfall, 10 KPI cards, strategy/timeframe selectors, parameter sweep heatmap

---

## Phase Summary

### Phase 1: Event Foundation
- 4 frozen event dataclasses, EventQueue (deque), causality test skeleton
- Plans: 01-01, 01-02 | Tests: 34

### Phase 2: Data Layer
- DataHandler yield-generator, CSV/yfinance/Alpha Vantage, Parquet cache, Decimal, gap-fill, adjusted prices, multi-symbol alignment
- Plans: 02-01, 02-02, 02-03 | Tests: 43

### Phase 3: Strategy Layer
- BaseStrategy ABC, ReversalStrategy, BreakoutStrategy, FVGStrategy, rolling buffer, parameter injection
- Plans: 03-01 | Tests: 33

### Phase 4: Execution Layer
- ExecutionHandler: market/limit/stop fills, slippage, commission, spread, pending order management
- Plans: 1 | Tests: 30

### Phase 5: Portfolio Layer
- Portfolio: Decimal cash/positions, FIFO PnL, position sizing, equity log, margin monitoring, order validation
- Plans: 1 | Tests: 22

### Phase 6: Engine Integration
- BacktestEngine orchestrator, create_engine() factory, sweep isolation, causality verification
- Plans: 1 | Tests: 11

### Phase 7: Analytics Layer
- MetricsResult dataclass, Net PnL, Sharpe, Sortino, MDD, Calmar, win rate, profit factor, exposure, CAGR, timeframe-specific annualization
- Plans: 1 | Tests: 20

### Phase 8: Dashboard Layer
- Dash app, candlestick + equity + drawdown charts, KPI panel, strategy/timeframe selectors, parameter sweep heatmap
- Plans: 1 | Tests: 31

### Health-Check (post-completion)
- 26 additional coverage-boost tests targeting uncovered paths
- Coverage: 86% -> 91%
- Tests: 250 total

---

## Decisions Made

| Decision | Rationale |
|----------|-----------|
| Event-Driven (not vectorized) | Prevents look-ahead bias structurally |
| decimal.Decimal (not float) | Prevents cumulative IEEE-754 rounding errors |
| Dash (not Streamlit) | Enterprise callbacks, Plotly-native charts |
| yfinance + Alpha Vantage | Free, reliable, broad market coverage |
| pytest TDD | Mathematical proof of correctness via tests |
| FIFO PnL with accumulated_friction | Accurate friction tracking per position |
| 10% fixed-fractional sizing | Simple, effective default position sizing |
| Parquet caching (float storage) | Fast I/O, Decimal conversion only at stream_bars() |

---
*Archived: 2026-02-22*
